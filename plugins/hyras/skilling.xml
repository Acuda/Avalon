<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Sonntag, November 13, 2011, 5:32  -->
<!-- MuClient version 4.75 -->

<!-- Plugin "skilling" generated by Plugin Wizard -->

<muclient>
<plugin
   name="skilling"
   author="magician"
   id="e3c8de537d07387b3eb8bccb"
   language="Lua"
   save_state="y"
   date_written="2011-11-13 17:31:42"
   requires="4.70"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<aliases>
<alias
	match="hskill_enable"
	enabled="y"
	send_to="12"
	sequence="100"
     >
     <send>hskill_init()</send>
</alias>
<alias
	match="hskill_disable"
	enabled="y"
	send_to="12"
	sequence="100"
     >
     <send>hskill_stop()</send>
</alias>
<alias
	match="hskill_status"
	enabled="y"
	send_to="12"
	sequence="100"
     >
     <send>hskill_status()</send>
</alias>
</aliases>

<script>
<![CDATA[
hskill_timer_time=300
hskill_timer_starttime=0
hskill_countall=0
hskill_count_evolate=0
hskill_count_regen=0
hskill_alc_command="tf"
hskill_active=false
hskill_skill_command="evod"
hskill_regen_command="evoa"
hskill_febrone_name="voshal"
hskill_evolate_text="warnen."
hskill_evolatefail_text="Du hast bei Deinem Spruch der Evolierung offenbar etwas verkehrt gemacht."
hskill_regenover_text="* ist nun voll aufgeladen und fliegt zurueck in Deinen Beutel."
hskill_regen_text="Dafuer hat Dein Febron * nicht mehr genug Kraft!"
hskill_retract_text="Du faengst * ein und legst Dein Febron in Deinen Febronenbeutel."
hskill_stats_text="Febronenbeutel."
hskill_alc_text="Du hast einen maechtigen Rausch."
function hskill_init()
hskill_active=true
create_triggers()
world.Execute(hskill_alc_command)
world.Execute(hskill_skill_command.." "..hskill_febrone_name)
end
function hskill_stop()
hskill_active=false
end
function hskill_regen()
if hskill_active==true then
world.Execute(hskill_regen_command.." "..hskill_febrone_name)
hskill_count_regen=hskill_count_regen+1
hskill_countall=hskill_countall+1
end
end
function hskill_evolate()
if hskill_active==true then
world.Execute(hskill_skill_command.." "..hskill_febrone_name)
end
if hskill_timer_starttime -os.time() +hskill_timer_time <0 then 
hskill_timer_starttime=0
end
end
function hskill_retract()
if hskill_active==true then
world.Execute("lege "..hskill_febrone_name.." in febronenbeutel")
hskill_countall=hskill_countall+1
hskill_count_evolate=hskill_count_evolate+1
end
end
function hskill_statsreg()
if hskill_active==true then
world.Execute(hskill_alc_command..";"..hskill_alc_command)
world.DoAfterSpecial(hskill_timer_time, "hskill_evolate()", 12)
hskill_timer_starttime=os.time()
end
end
function hskill_alc()
if hskill_active==true then
world.Execute(hskill_alc_command)
end
end
function hskill_status()
world.Note("Dein Febron "..hskill_febrone_name.." wurde bereits "..hskill_countall.." mal evoliert. Davon sind "..hskill_count_evolate.." erfolgreich und "..hskill_count_regen.." zum Aufladen evoliert wurden.")
if hskill_timer_starttime >0 then
now =os.time()
diff =now -hskill_timer_starttime
left =tonumber(hskill_timer_time) -tonumber(diff)
world.Note("Der Timer läuft in  "..left.." Sekunden ab.")
else
world.Note("Es läuft im moment kein Timer.")
end
end
function create_triggers()
world.AddTriggerEx("", hskill_evolate_text, "hskill_retract()", trigger_flag.Enabled, custom_colour.Custom15, 0, "", "", 12, 100)
world.AddTriggerEx("", hskill_retract_text, "hskill_evolate()", trigger_flag.Enabled, custom_colour.Custom15, 0, "", "", 12, 100)
world.AddTriggerEx("", hskill_regen_text, "hskill_regen()", trigger_flag.Enabled, custom_colour.Custom15, 0, "", "", 12, 100)
world.AddTriggerEx("", hskill_regenover_text, "hskill_evolate()", trigger_flag.Enabled, custom_colour.Custom15, 0, "", "", 12, 100)
world.AddTriggerEx("", hskill_evolatefail_text, "hskill_evolate()", trigger_flag.Enabled, custom_colour.Custom15, 0, "", "", 12, 100)
world.AddTriggerEx("", hskill_stats_text, "hskill_statsreg()", trigger_flag.Enabled, custom_colour.Custom15, 0, "", "", 12, 100)
world.AddTriggerEx("", hskill_alc_text, "hskill_alc()", trigger_flag.Enabled, custom_colour.Custom15, 0, "", "", 12, 100)
end
]]>
</script>
</muclient>
