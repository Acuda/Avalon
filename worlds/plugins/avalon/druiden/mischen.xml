<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Samstag, November 12, 2011, 11:15  -->
<!-- MuClient version 4.73 -->

<!-- Plugin "mischen" generated by Plugin Wizard -->

<muclient>
<plugin
   name="mischen"
   author="magician"
   id="427d35fd4a5ac2b87b58c5f0"
   language="Lua"
   save_state="y"
   date_written="2011-11-12 23:13:32"
   requires="4.73"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Timers  -->
<triggers>
<trigger
	enabled="y"
	match="ausmachen."
	send_to="12"
	sequence="100"
     >
     <send>mix_getwater()</send>
</trigger>
<trigger
	enabled="y"
	match="Somit ist Dein Kraeuterfass jetzt randvoll."
	send_to="12"
	sequence="100"
     >
     <send>mix_changemixcontainer()</send>
</trigger>
<trigger
	enabled="y"
	match="des Ruehrstabes darauf*"
	send_to="12"
	sequence="95"
     >
     <send>mix_fill()</send>
</trigger>
</triggers>
<aliases>
<alias
	match="mix_getcount"
	enabled="y"
	send_to="12"
	sequence="100"
     >
     <send>mix_getcount()</send>
</alias>
<alias
	match="mix_start"
	enabled="y"
	send_to="12"
	sequence="100"
     >
     <send>mix_init()</send>
</alias>
<alias
	match="mix_stop"
	enabled="y"
	send_to="12"
	sequence="100"
     >
<send>mix_stop()</send>
</alias>
</aliases>
<timers>
  <timer name="mix_timer" enabled="n" minute="1" second="0.00" offset_second="0.00"    send_to="12"
>
  <send>mix_mix()</send>

  </timer>
</timers>

<script>
<![CDATA[
mix_count=0
mix_active=false
mix_mixcontainer="mein 1. kraeuterfass"
mix_mixcontainer_container="meine tasche"
mix_command="mische trank mit langstaengel von beutel,sanguon von beutel,semmelstoppelpilz von beutel,tigerpflanze von beutel"
mix_tag="Di-Antitoxit - von Jane fuer Baltheasar"
mix_newmixcontainer="leeres kraeuterfass"
function mix_init()
mix_active=true
world.EnableTimer("mix_timer", true)
end
function mix_fill()
if mix_active==true then
world.Execute("fuelle "..mix_mixcontainer.." mit meinem kessel")
mix_count=mix_count+1
end
end
function mix_mix()
world.Execute(mix_command)
end
function mix_stop()
world.ResetTimer("mix_timer")
world.EnableTimer("mix_timer", false)
mix_active=false
end
function mix_changemixcontainer()
world.Execute("beschrifte "..mix_mixcontainer)
world.Execute(mix_tag)
world.Execute(".x")
world.Execute("lege "..mix_mixcontainer.." in "..mix_mixcontainer_container)
world.Execute("nimm "..mix_newmixcontainer.." aus "..mix_mixcontainer_container)
end
function mix_getcount()
world.Note("Du hast bereits "..mix_count.." Schlucke gemischt.")
end
function mix_getwater()
world.Execute("so")
world.Execute("s")
world.Execute("s")
world.Execute("w")
world.Execute("fülle mein moosbewachsenes fass mit wasser")
world.Execute("o")
world.Execute("n")
world.Execute("n")
world.Execute("nw")
end
]]>
</script>
</muclient>
